<!-- 
  å‚è€ƒ:
  window.print() å‰ç«¯å®ç°ç½‘é¡µæ‰“å°è¯¦è§£
  https://blog.csdn.net/qq_38128179/article/details/103344021 
-->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="./inline-style.css">
  <link rel="stylesheet" href="./style.css">
  <style>
    @page {
      /* margin-top: 0; */
      /* margin-bottom: 0 */
    }
  </style>

  <script>
    
    const title = `é¢è¯•å®˜è¿ç¯è¿½é—®ï¼šæ•°ç»„æ‹å¹³ï¼ˆæ‰å¹³åŒ–ï¼‰ flat æ–¹æ³•å®ç°`
    setTimeout(() => {
      document.title = title
      document.querySelector('.article-title').innerText = title
    })

  </script>
</head>

<body style="padding-top: 20px;">
  <h1 class="article-title"></h1>
  <div class="article-content">
    <!-- CONTENT START -->

    <div class="markdown-body html"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;margin-bottom:5px}.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{font-size:20px}.markdown-body h2{padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å‰æ®µæ—¶é—´ç§‹æ‹›é¢å“”å“©å“”å“©çš„æ—¶å€™ï¼Œé¢è¯•å®˜é—®ï¼šå¦‚ä½•å®ç° <code>flat</code> æ–¹æ³•ï¼Ÿå½“æ—¶æ‰‹å†™çš„å¹¶ä¸å®Œç¾ï¼Œåæ¥å›ç›˜å¤ä¹ ï¼Œå‘ç°é¢è¯•è¦æ±‚æ‰‹å†™æ•°ç»„æ‹å¹³ï¼ˆæ‰å¹³åŒ–ï¼‰ <code>flat</code> æ–¹æ³•çš„é¢è¯•å®˜ä¸åœ¨å°‘æ•°ã€‚å…¶ä¸­åŒ…æ‹¬ï¼šæ‹¼å¤šå¤šã€å°ç±³ã€ç¾å›¢ã€æ»´æ»´ã€shopeeã€æœ‰èµç­‰ã€‚æ‰‹å†™ <code>flat</code> æ–¹æ³•æ˜¯ä¸€é“éå¸¸åŸºç¡€çš„é¢è¯•é¢˜ï¼Œé€šå¸¸å‡ºç°åœ¨ç¬”è¯•æˆ–è€…ç¬¬ä¸€è½®é¢è¯•å½“ä¸­ï¼Œä¸»è¦è€ƒå¯ŸåŸºæœ¬çš„æ‰‹å†™ä»£ç çš„èƒ½åŠ›ã€‚ä»Šå¤©å°±ä»äº†è§£ <code>flat</code> ç‰¹æ€§åˆ°å®ç° <code>flat</code> å†åˆ°æ¥ä½é¢è¯•å®˜çš„è¿ç¯è¿½é—®é‡æ–°å­¦ä¹ ä¸€éæ•°ç»„æ‹å¹³ï¼ˆæ‰å¹³åŒ–ï¼‰ <code>flat</code> æ–¹æ³•å§ã€‚</p>
<blockquote>
<p><a target="_blank" href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FNieZhuZhu%2FBlog" title="https://github.com/NieZhuZhu/Blog" ref="nofollow noopener noreferrer">Github æˆ³æˆ‘</a></p>
</blockquote>
<h2 data-id="heading-1">ä¸€æ®µä»£ç æ€»ç»“ <code>Array.prototype.flat()</code>  ç‰¹æ€§</h2>
<blockquote>
<p>æ³¨ï¼šæ•°ç»„æ‹å¹³æ–¹æ³• <code>Array.prototype.flat()</code>  ä¹Ÿå«æ•°ç»„æ‰å¹³åŒ–ã€æ•°ç»„æ‹‰å¹³ã€æ•°ç»„é™ç»´ã€‚ æœ¬æ–‡ç»Ÿä¸€å«ï¼šæ•°ç»„æ‹å¹³</p>
</blockquote>
<pre><code lang="javascript" class="copyable"><span>const</span> animals = [<span>"ğŸ·"</span>, [<span>"ğŸ¶"</span>, <span>"ğŸ‚"</span>], [<span>"ğŸ"</span>, [<span>"ğŸ‘"</span>, [<span>"ğŸ²"</span>]], <span>"ğŸ›"</span>]];

<span>// ä¸ä¼ å‚æ•°æ—¶ï¼Œé»˜è®¤â€œæ‹‰å¹³â€ä¸€å±‚</span>
animals.flat();
<span>// ["ğŸ·", "ğŸ¶", "ğŸ‚", "ğŸ", ["ğŸ‘", ["ğŸ²"]], "ğŸ›"]</span>

<span>// ä¼ å…¥ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œæ•´æ•°å³â€œæ‹‰å¹³â€çš„å±‚æ•°</span>
animals.flat(<span>2</span>);
<span>// ["ğŸ·", "ğŸ¶", "ğŸ‚", "ğŸ", "ğŸ‘", ["ğŸ²"], "ğŸ›"]</span>

<span>// Infinity å…³é”®å­—ä½œä¸ºå‚æ•°æ—¶ï¼Œæ— è®ºå¤šå°‘å±‚åµŒå¥—ï¼Œéƒ½ä¼šè½¬ä¸ºä¸€ç»´æ•°ç»„</span>
animals.flat(<span>Infinity</span>);
<span>// ["ğŸ·", "ğŸ¶", "ğŸ‚", "ğŸ", "ğŸ‘", "ğŸ²", "ğŸ›"]</span>

<span>// ä¼ å…¥ &lt;=0 çš„æ•´æ•°å°†è¿”å›åŸæ•°ç»„ï¼Œä¸â€œæ‹‰å¹³â€</span>
animals.flat(<span>0</span>);
animals.flat(<span>-10</span>);
<span>// ["ğŸ·", ["ğŸ¶", "ğŸ‚"], ["ğŸ", ["ğŸ‘", ["ğŸ²"]], "ğŸ›"]];</span>

<span>// å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½ï¼Œflat()æ–¹æ³•ä¼šè·³è¿‡ç©ºä½ã€‚</span>
[<span>"ğŸ·"</span>, <span>"ğŸ¶"</span>, <span>"ğŸ‚"</span>, <span>"ğŸ"</span>,,].flat();
<span>// ["ğŸ·", "ğŸ¶", "ğŸ‚", "ğŸ"]</span>

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre><h3 data-id="heading-2"><code>Array.prototype.flat()</code>  ç‰¹æ€§æ€»ç»“</h3>
<ul>
<li><code>Array.prototype.flat()</code> ç”¨äºå°†åµŒå¥—çš„æ•°ç»„â€œæ‹‰å¹³â€ï¼Œå˜æˆä¸€ç»´çš„æ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¯¹åŸæ•°æ®æ²¡æœ‰å½±å“ã€‚</li>
<li>ä¸ä¼ å‚æ•°æ—¶ï¼Œé»˜è®¤â€œæ‹‰å¹³â€ä¸€å±‚ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæƒ³è¦â€œæ‹‰å¹³â€çš„å±‚æ•°ã€‚</li>
<li>ä¼ å…¥ <code>&lt;=0</code> çš„æ•´æ•°å°†è¿”å›åŸæ•°ç»„ï¼Œä¸â€œæ‹‰å¹³â€</li>
<li><code>Infinity</code> å…³é”®å­—ä½œä¸ºå‚æ•°æ—¶ï¼Œæ— è®ºå¤šå°‘å±‚åµŒå¥—ï¼Œéƒ½ä¼šè½¬ä¸ºä¸€ç»´æ•°ç»„</li>
<li>å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½ï¼Œ<code>Array.prototype.flat()</code> ä¼šè·³è¿‡ç©ºä½ã€‚</li>
</ul>
<h2 data-id="heading-3">é¢è¯•å®˜ N è¿é—®</h2>
<h3 data-id="heading-4">ç¬¬ä¸€é—®ï¼šå®ç°ä¸€ä¸ªç®€å•çš„æ•°ç»„æ‹å¹³ <code>flat</code> å‡½æ•°</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†èŠ±ä¸€ç‚¹ç¯‡å¹…æ¥æ¢è®¨å¦‚ä½•å®ç°ä¸€ä¸ªç®€å•çš„æ•°ç»„æ‹å¹³ <code>flat</code> å‡½æ•°ï¼Œè¯¦ç»†ä»‹ç»å¤šç§å®ç°çš„æ–¹æ¡ˆï¼Œç„¶åå†å°è¯•æ¥ä½é¢è¯•å®˜çš„è¿ç¯è¿½é—®ã€‚</p>
<h4 data-id="heading-5">å®ç°æ€è·¯</h4>
<p>å¦‚ä½•å®ç°å‘¢ï¼Œæ€è·¯éå¸¸ç®€å•ï¼šå®ç°ä¸€ä¸ªæœ‰æ•°ç»„æ‹å¹³åŠŸèƒ½çš„ <code>flat</code> å‡½æ•°ï¼Œ<strong>æˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨æ•°ç»„ä¸­æ‰¾åˆ°æ˜¯æ•°ç»„ç±»å‹çš„å…ƒç´ ï¼Œç„¶åå°†ä»–ä»¬å±•å¼€</strong>ã€‚è¿™å°±æ˜¯å®ç°æ•°ç»„æ‹å¹³ <code>flat</code> æ–¹æ³•çš„å…³é”®æ€è·¯ã€‚</p>
<p>æœ‰äº†æ€è·¯ï¼Œæˆ‘ä»¬å°±éœ€è¦è§£å†³å®ç°è¿™ä¸ªæ€è·¯éœ€è¦å…‹æœçš„å›°éš¾ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€ä¸ªè¦è§£å†³çš„å°±æ˜¯éå†æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼›</strong></li>
<li><strong>ç¬¬äºŒä¸ªè¦è§£å†³çš„å°±æ˜¯åˆ¤æ–­å…ƒç´ æ˜¯å¦æ˜¯æ•°ç»„ï¼›</strong></li>
<li><strong>ç¬¬ä¸‰ä¸ªè¦è§£å†³çš„å°±æ˜¯å°†æ•°ç»„çš„å…ƒç´ å±•å¼€ä¸€å±‚ï¼›</strong></li>
</ul>
<h4 data-id="heading-6">éå†æ•°ç»„çš„æ–¹æ¡ˆ</h4>
<p>éå†æ•°ç»„å¹¶å–å¾—æ•°ç»„å…ƒç´ çš„æ–¹æ³•éå¸¸ä¹‹å¤šï¼Œ<strong>åŒ…æ‹¬ä¸”ä¸é™äºä¸‹é¢å‡ ç§</strong>ï¼š</p>
<ul>
<li><code>for å¾ªç¯</code></li>
<li><code>for...of</code></li>
<li><code>for...in</code></li>
<li><code>forEach()</code></li>
<li><code>entries()</code></li>
<li><code>keys()</code></li>
<li><code>values()</code></li>
<li><code>reduce()</code></li>
<li><code>map()</code></li>
</ul>
<pre><code lang="javascript" class="copyable"><span>const</span> arr = [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>]]], <span>5</span>, <span>"string"</span>, { <span>name</span>: <span>"å¼¹é“è›‹åŒå­¦"</span> }];
<span>// éå†æ•°ç»„çš„æ–¹æ³•æœ‰å¤ªå¤šï¼Œæœ¬æ–‡åªæšä¸¾å¸¸ç”¨çš„å‡ ç§</span>
<span>// for å¾ªç¯</span>
<span>for</span> (<span>let</span> i = <span>0</span>; i &lt; arr.length; i++) {
  <span>console</span>.log(arr[i]);
}
<span>// for...of</span>
<span>for</span> (<span>let</span> value <span>of</span> arr) {
  <span>console</span>.log(value);
}
<span>// for...in</span>
<span>for</span> (<span>let</span> i <span>in</span> arr) {
  <span>console</span>.log(arr[i]);
}
<span>// forEach å¾ªç¯</span>
arr.forEach(<span><span>value</span> =&gt;</span> {
  <span>console</span>.log(value);
});
<span>// entriesï¼ˆï¼‰</span>
<span>for</span> (<span>let</span> [index, value] <span>of</span> arr.entries()) {
  <span>console</span>.log(value);
}
<span>// keys()</span>
<span>for</span> (<span>let</span> index <span>of</span> arr.keys()) {
  <span>console</span>.log(arr[index]);
}
<span>// values()</span>
<span>for</span> (<span>let</span> value <span>of</span> arr.values()) {
  <span>console</span>.log(value);
}
<span>// reduce()</span>
arr.reduce(<span>(<span>pre, cur</span>) =&gt;</span> {
  <span>console</span>.log(cur);
}, []);
<span>// map()</span>
arr.map(<span><span>value</span> =&gt;</span> <span>console</span>.log(value));
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre><p>åªè¦æ˜¯èƒ½å¤Ÿéå†æ•°ç»„å–åˆ°æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ çš„æ–¹æ³•ï¼Œéƒ½æ˜¯ä¸€ç§å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-7">åˆ¤æ–­å…ƒç´ æ˜¯æ•°ç»„çš„æ–¹æ¡ˆ</h4>
<ul>
<li><code>instanceof</code></li>
<li><code>constructor</code></li>
<li><code>Object.prototype.toString</code></li>
<li><code>isArray</code></li>
</ul>
<pre><code lang="javascript" class="copyable"><span>const</span> arr = [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>]]], <span>5</span>, <span>"string"</span>, { <span>name</span>: <span>"å¼¹é“è›‹åŒå­¦"</span> }];
arr <span>instanceof</span> <span>Array</span>
<span>// true</span>
arr.constructor === <span>Array</span>
<span>// true</span>
<span>Object</span>.prototype.toString.call(arr) === <span>'[object Array]'</span>
<span>// true</span>
<span>Array</span>.isArray(arr)
<span>// true</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre><p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>
<p><code>instanceof</code> æ“ä½œç¬¦æ˜¯å‡å®šåªæœ‰ä¸€ç§å…¨å±€ç¯å¢ƒï¼Œå¦‚æœç½‘é¡µä¸­åŒ…å«å¤šä¸ªæ¡†æ¶ï¼Œå¤šä¸ªå…¨å±€ç¯å¢ƒï¼Œå¦‚æœä½ ä»ä¸€ä¸ªæ¡†æ¶å‘å¦ä¸€ä¸ªæ¡†æ¶ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆä¼ å…¥çš„æ•°ç»„ä¸åœ¨ç¬¬äºŒä¸ªæ¡†æ¶ä¸­åŸç”Ÿåˆ›å»ºçš„æ•°ç»„åˆ†åˆ«å…·æœ‰å„è‡ªä¸åŒçš„æ„é€ å‡½æ•°ã€‚ï¼ˆæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ä¼šä¸å‡†ç¡®ï¼‰</p>
</li>
<li>
<p><code>typeof</code> æ“ä½œç¬¦å¯¹æ•°ç»„å–ç±»å‹å°†è¿”å› <code>object</code></p>
</li>
<li>
<p>å› ä¸º<code>constructor</code> å¯ä»¥è¢«é‡å†™ï¼Œæ‰€ä»¥ä¸èƒ½ç¡®ä¿ä¸€å®šæ˜¯æ•°ç»„ã€‚</p>
<pre><code lang="javascript" class="copyable"><span>const</span> str = <span>'abc'</span>;
str.constructor = <span>Array</span>;
str.constructor === <span>Array</span> 
<span>// true</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre></li>
</ul>
<h4 data-id="heading-8">å°†æ•°ç»„çš„å…ƒç´ å±•å¼€ä¸€å±‚çš„æ–¹æ¡ˆ</h4>
<ul>
<li>æ‰©å±•è¿ç®—ç¬¦ + <code>concat</code></li>
</ul>
<p><code>concat()</code> æ–¹æ³•ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ï¼Œåœ¨æ‹¼æ¥çš„è¿‡ç¨‹ä¸­åŠ ä¸Šæ‰©å±•è¿ç®—ç¬¦ä¼šå±•å¼€ä¸€å±‚æ•°ç»„ã€‚è¯¦ç»†è§ä¸‹é¢çš„ä»£ç ã€‚</p>
<ul>
<li><code>conca</code>t +<code>apply</code></li>
</ul>
<p>ä¸»è¦æ˜¯åˆ©ç”¨ <code>apply</code> åœ¨ç»‘å®šä½œç”¨åŸŸæ—¶ï¼Œä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–è€…ç±»æ•°ç»„å¯¹è±¡ï¼Œå…¶ä¸­çš„æ•°ç»„å…ƒç´ å°†ä½œä¸ºå•ç‹¬çš„å‚æ•°ä¼ ç»™ <code>func</code> å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯åœ¨è°ƒç”¨ <code>apply</code> å‡½æ•°çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå°†ä¼ å…¥çš„æ•°ç»„ä¸€ä¸ªä¸€ä¸ªçš„ä¼ å…¥åˆ°è¦æ‰§è¡Œçš„å‡½æ•°ä¸­ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“å¯¹æ•°ç»„è¿›è¡Œäº†ä¸€å±‚çš„å±•å¼€ã€‚</p>
<ul>
<li><code>toString</code>  + <code>split</code></li>
</ul>
<p>ä¸æ¨èä½¿ç”¨ <code>toString</code> + <code>split</code> æ–¹æ³•ï¼Œå› ä¸ºæ“ä½œå­—ç¬¦ä¸²æ˜¯å’Œå±é™©çš„äº‹æƒ…ï¼Œåœ¨<a target="_blank" href="https://juejin.cn/post/6844904016212672519" title="https://juejin.cn/post/6844904016212672519">ä¸Šä¸€æ–‡ç« </a>ä¸­æˆ‘åšäº†ä¸€ä¸ªæ“ä½œå­—ç¬¦ä¸²çš„æ¡ˆä¾‹è¿˜è¢«è®¸å¤šå°ä¼™ä¼´ä»¬æ‰¹è¯„äº†ã€‚å¦‚æœæ•°ç»„ä¸­çš„å…ƒç´ æ‰€æœ‰éƒ½æ˜¯æ•°å­—çš„è¯ï¼Œ<code>toString</code> +<code>split</code> æ˜¯å¯è¡Œçš„ï¼Œå¹¶ä¸”æ˜¯ä¸€æ­¥æå®šã€‚</p>
<pre><code lang="javascript" class="copyable"><span>const</span> arr = [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>]]], <span>5</span>, <span>"string"</span>, { <span>name</span>: <span>"å¼¹é“è›‹åŒå­¦"</span> }];
<span>// æ‰©å±•è¿ç®—ç¬¦ + concat</span>
[].concat(...arr)
<span>// [1, 2, 3, 4, 1, 2, 3, [1, 2, 3, [1, 2, 3]], 5, "string", { name: "å¼¹é“è›‹åŒå­¦" }];</span>

<span>// concat + apply</span>
[].concat.apply([], arr);
<span>// [1, 2, 3, 4, 1, 2, 3, [1, 2, 3, [1, 2, 3]], 5, "string", { name: "å¼¹é“è›‹åŒå­¦" }];</span>

<span>// toString  + split</span>
<span>const</span> arr2 =[<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>]]]]
arr2.toString().split(<span>','</span>).map(<span><span>v</span>=&gt;</span><span>parseInt</span>(v))
<span>// [1, 2, 3, 4, 1, 2, 3, 1, 2, 3, 1, 2, 3]</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre><p>æ€»ç»“å®Œè¦è§£å†³çš„ä¸‰å¤§å›°éš¾ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥éå¸¸è½»æ¾çš„å®ç°ä¸€ç‰ˆæ•°ç»„æ‹å¹³ <code>flat</code> å‡½æ•°äº†ã€‚</p>
<pre><code lang="javascript" class="copyable"><span>const</span> arr = [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>]]], <span>5</span>, <span>"string"</span>, { <span>name</span>: <span>"å¼¹é“è›‹åŒå­¦"</span> }];
<span>// concat + é€’å½’</span>
<span><span>function</span> <span>flat</span>(<span>arr</span>) </span>{
  <span>let</span> arrResult = [];
  arr.forEach(<span><span>item</span> =&gt;</span> {
    <span>if</span> (<span>Array</span>.isArray(item)) {
      arrResult = arrResult.concat(<span>arguments</span>.callee(item));   <span>// é€’å½’</span>
      <span>// æˆ–è€…ç”¨æ‰©å±•è¿ç®—ç¬¦</span>
      <span>// arrResult.push(...arguments.callee(item));</span>
    } <span>else</span> {
      arrResult.push(item);
    }
  });
  <span>return</span> arrResult;
}
flat(arr)
<span>// [1, 2, 3, 4, 1, 2, 3, 1, 2, 3, 1, 2, 3, 5, "string", { name: "å¼¹é“è›‹åŒå­¦" }];</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre><p>åˆ°è¿™é‡Œï¼Œæ­å–œä½ æˆåŠŸå¾—åˆ°äº†é¢è¯•å®˜å¯¹ä½ æ‰‹æ’•ä»£ç èƒ½åŠ›çš„åŸºæœ¬è®¤å¯ğŸ‰ã€‚ä½†æ˜¯é¢è¯•å®˜å¾€å¾€ä¼šä¸æ­¢äºæ­¤ï¼Œå°†ç»§ç»­è€ƒå¯Ÿé¢è¯•è€…çš„å„ç§èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-9">ç¬¬äºŒé—®ï¼šç”¨ <code>reduce</code> å®ç° <code>flat</code> å‡½æ•°</h3>
<p>æˆ‘è§è¿‡å¾ˆå¤šçš„é¢è¯•å®˜éƒ½å¾ˆå–œæ¬¢ç‚¹åé“å§“çš„è¦é¢è¯•è€…ç›´æ¥ç”¨ <code>reduce</code> å»å®ç° <code>flat</code> å‡½æ•°ã€‚æƒ³çŸ¥é“ä¸ºä»€ä¹ˆï¼Ÿæ–‡ç« ååŠç¯‡æˆ‘ä»¬è€ƒè™‘æ•°ç»„ç©ºä½çš„æƒ…å†µçš„æ—¶å€™å°±çŸ¥é“ä¸ºå•¥äº†ã€‚å…¶å®æ€è·¯ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p>
<pre><code lang="javascript" class="copyable"><span>const</span> arr = [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>]]], <span>5</span>, <span>"string"</span>, { <span>name</span>: <span>"å¼¹é“è›‹åŒå­¦"</span> }]

<span>// é¦–å…ˆä½¿ç”¨ reduce å±•å¼€ä¸€å±‚</span>
arr.reduce(<span>(<span>pre, cur</span>) =&gt;</span> pre.concat(cur), []);
<span>// [1, 2, 3, 4, 1, 2, 3, [1, 2, 3, [1, 2, 3]], 5, "string", { name: "å¼¹é“è›‹åŒå­¦" }];</span>

<span>// ç”¨ reduce å±•å¼€ä¸€å±‚ + é€’å½’</span>
<span>const</span> flat = <span><span>arr</span> =&gt;</span> {
  <span>return</span> arr.reduce(<span>(<span>pre, cur</span>) =&gt;</span> {
    <span>return</span> pre.concat(<span>Array</span>.isArray(cur) ? flat(cur) : cur);
  }, []);
};
<span>// [1, 2, 3, 4, 1, 2, 3, 1, 2, 3, 1, 2, 3, 5, "string", { name: "å¼¹é“è›‹åŒå­¦" }];</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre><h3 data-id="heading-10">ç¬¬ä¸‰é—®ï¼šä½¿ç”¨æ ˆçš„æ€æƒ³å®ç° <code>flat</code> å‡½æ•°</h3>
<pre><code lang="javascript" class="copyable"><span>// æ ˆæ€æƒ³</span>
<span><span>function</span> <span>flat</span>(<span>arr</span>) </span>{
  <span>const</span> result = []; 
  <span>const</span> stack = [].concat(arr);  <span>// å°†æ•°ç»„å…ƒç´ æ‹·è´è‡³æ ˆï¼Œç›´æ¥èµ‹å€¼ä¼šæ”¹å˜åŸæ•°ç»„</span>
  <span>//å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œåˆ™å¾ªç¯éå†</span>
  <span>while</span> (stack.length !== <span>0</span>) {
    <span>const</span> val = stack.pop(); 
    <span>if</span> (<span>Array</span>.isArray(val)) {
      stack.push(...val); <span>//å¦‚æœæ˜¯æ•°ç»„å†æ¬¡å…¥æ ˆï¼Œå¹¶ä¸”å±•å¼€äº†ä¸€å±‚</span>
    } <span>else</span> {
      result.unshift(val); <span>//å¦‚æœä¸æ˜¯æ•°ç»„å°±å°†å…¶å–å‡ºæ¥æ”¾å…¥ç»“æœæ•°ç»„ä¸­</span>
    }
  }
  <span>return</span> result;
}
<span>const</span> arr = [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>]]], <span>5</span>, <span>"string"</span>, { <span>name</span>: <span>"å¼¹é“è›‹åŒå­¦"</span> }]
flat(arr)
<span>// [1, 2, 3, 4, 1, 2, 3, 1, 2, 3, 1, 2, 3, 5, "string", { name: "å¼¹é“è›‹åŒå­¦" }];</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre><h3 data-id="heading-11">ç¬¬å››é—®ï¼šé€šè¿‡ä¼ å…¥æ•´æ•°å‚æ•°æ§åˆ¶â€œæ‹‰å¹³â€å±‚æ•°</h3>
<pre><code lang="javascript" class="copyable"><span>// reduce + é€’å½’</span>
<span><span>function</span> <span>flat</span>(<span>arr, num = <span>1</span></span>) </span>{
  <span>return</span> num &gt; <span>0</span>
    ? arr.reduce(
        <span>(<span>pre, cur</span>) =&gt;</span>
          pre.concat(<span>Array</span>.isArray(cur) ? flat(cur, num - <span>1</span>) : cur),
        []
      )
    : arr.slice();
}
<span>const</span> arr = [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>]]], <span>5</span>, <span>"string"</span>, { <span>name</span>: <span>"å¼¹é“è›‹åŒå­¦"</span> }]
flat(arr, <span>Infinity</span>);
<span>// [1, 2, 3, 4, 1, 2, 3, 1, 2, 3, 1, 2, 3, 5, "string", { name: "å¼¹é“è›‹åŒå­¦" }];</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre><h3 data-id="heading-12">ç¬¬äº”é—®ï¼šä½¿ç”¨ <code>Generator</code> å®ç° <code>flat</code> å‡½æ•°</h3>
<pre><code lang="javascript" class="copyable"><span><span>function</span>* <span>flat</span>(<span>arr, num</span>) </span>{
  <span>if</span> (num === <span>undefined</span>) num = <span>1</span>;
  <span>for</span> (<span>const</span> item <span>of</span> arr) {
    <span>if</span> (<span>Array</span>.isArray(item) &amp;&amp; num &gt; <span>0</span>) {   <span>// num &gt; 0</span>
      <span>yield</span>* flat(item, num - <span>1</span>);
    } <span>else</span> {
      <span>yield</span> item;
    }
  }
}
<span>const</span> arr = [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>]]], <span>5</span>, <span>"string"</span>, { <span>name</span>: <span>"å¼¹é“è›‹åŒå­¦"</span> }]
<span>// è°ƒç”¨ Generator å‡½æ•°åï¼Œè¯¥å‡½æ•°å¹¶ä¸æ‰§è¡Œï¼Œè¿”å›çš„ä¹Ÿä¸æ˜¯å‡½æ•°è¿è¡Œç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡ã€‚</span>
<span>// ä¹Ÿå°±æ˜¯éå†å™¨å¯¹è±¡ï¼ˆIterator Objectï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬è¦ç”¨ä¸€æ¬¡æ‰©å±•è¿ç®—ç¬¦å¾—åˆ°ç»“æœ</span>
[...flat(arr, <span>Infinity</span>)]    
<span>// [1, 2, 3, 4, 1, 2, 3, 1, 2, 3, 1, 2, 3, 5, "string", { name: "å¼¹é“è›‹åŒå­¦" }];</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre><h3 data-id="heading-13">ç¬¬å…­é—®ï¼šå®ç°åœ¨åŸå‹é“¾ä¸Šé‡å†™ <code>flat</code> å‡½æ•°</h3>
<pre><code lang="javascript" class="copyable"><span>Array</span>.prototype.fakeFlat = <span><span>function</span>(<span>num = <span>1</span></span>) </span>{
  <span>if</span> (!<span>Number</span>(num) || <span>Number</span>(num) &lt; <span>0</span>) {
    <span>return</span> <span>this</span>;
  }
  <span>let</span> arr = <span>this</span>.concat();    <span>// è·å¾—è°ƒç”¨ fakeFlat å‡½æ•°çš„æ•°ç»„</span>
  <span>while</span> (num &gt; <span>0</span>) {           
    <span>if</span> (arr.some(<span><span>x</span> =&gt;</span> <span>Array</span>.isArray(x))) {
      arr = [].concat.apply([], arr);	<span>// æ•°ç»„ä¸­è¿˜æœ‰æ•°ç»„å…ƒç´ çš„è¯å¹¶ä¸” num &gt; 0ï¼Œç»§ç»­å±•å¼€ä¸€å±‚æ•°ç»„ </span>
    } <span>else</span> {
      <span>break</span>; <span>// æ•°ç»„ä¸­æ²¡æœ‰æ•°ç»„å…ƒç´ å¹¶ä¸”ä¸ç®¡ num æ˜¯å¦ä¾æ—§å¤§äº 0ï¼Œåœæ­¢å¾ªç¯ã€‚</span>
    }
    num--;
  }
  <span>return</span> arr;
};
<span>const</span> arr = [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>, [<span>1</span>, <span>2</span>, <span>3</span>]]], <span>5</span>, <span>"string"</span>, { <span>name</span>: <span>"å¼¹é“è›‹åŒå­¦"</span> }]
arr.fakeFlat(<span>Infinity</span>)
<span>// [1, 2, 3, 4, 1, 2, 3, 1, 2, 3, 1, 2, 3, 5, "string", { name: "å¼¹é“è›‹åŒå­¦" }];</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre><h3 data-id="heading-14">ç¬¬ä¸ƒé—®ï¼šè€ƒè™‘æ•°ç»„ç©ºä½çš„æƒ…å†µ</h3>
<p>ç”±æœ€å¼€å§‹æˆ‘ä»¬æ€»ç»“çš„ <code>flat</code> ç‰¹æ€§çŸ¥é“ï¼Œ<code>flat</code> å‡½æ•°æ‰§è¡Œæ˜¯ä¼šè·³è¿‡ç©ºä½çš„ã€‚ES5 å¤§å¤šæ•°æ•°ç»„æ–¹æ³•å¯¹ç©ºä½çš„å¤„ç†éƒ½ä¼šé€‰æ‹©è·³è¿‡ç©ºä½åŒ…æ‹¬ï¼š<code>forEach()</code>, <code>filter()</code>, <code>reduce()</code>, <code>every()</code> å’Œ <code>some()</code> éƒ½ä¼šè·³è¿‡ç©ºä½ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸Šé¢å‡ ç§æ–¹æ³•æ¥å®ç° flat è·³è¿‡ç©ºä½çš„ç‰¹æ€§</p>
<pre><code lang="javascript" class="copyable"><span>// reduce + é€’å½’</span>
<span>Array</span>.prototype.fakeFlat = <span><span>function</span>(<span>num = <span>1</span></span>) </span>{
  <span>if</span> (!<span>Number</span>(num) || <span>Number</span>(num) &lt; <span>0</span>) {
    <span>return</span> <span>this</span>;
  }
  <span>let</span> arr = [].concat(<span>this</span>);
  <span>return</span> num &gt; <span>0</span>
    ? arr.reduce(
        <span>(<span>pre, cur</span>) =&gt;</span>
          pre.concat(<span>Array</span>.isArray(cur) ? cur.fakeFlat(--num) : cur),
        []
      )
    : arr.slice();
};
<span>const</span> arr = [<span>1</span>, [<span>3</span>, <span>4</span>], , ,];
arr.fakeFlat()
<span>// [1, 3, 4]</span>

<span>// foEach + é€’å½’</span>
<span>Array</span>.prototype.fakeFlat = <span><span>function</span>(<span>num = <span>1</span></span>) </span>{
  <span>if</span> (!<span>Number</span>(num) || <span>Number</span>(num) &lt; <span>0</span>) {
    <span>return</span> <span>this</span>;
  }
  <span>let</span> arr = [];
  <span>this</span>.forEach(<span><span>item</span> =&gt;</span> {
    <span>if</span> (<span>Array</span>.isArray(item)) {
      arr = arr.concat(item.fakeFlat(--num));
    } <span>else</span> {
      arr.push(item);
    }
  });
  <span>return</span> arr;
};
<span>const</span> arr = [<span>1</span>, [<span>3</span>, <span>4</span>], , ,];
arr.fakeFlat()
<span>// [1, 3, 4]</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre><h3 data-id="heading-15">æ‰©å±•é˜…è¯»ï¼š<strong>ç”±äºç©ºä½çš„å¤„ç†è§„åˆ™éå¸¸ä¸ç»Ÿä¸€ï¼Œæ‰€ä»¥å»ºè®®é¿å…å‡ºç°ç©ºä½ã€‚</strong></h3>
<p><strong>ES5 å¯¹ç©ºä½çš„å¤„ç†ï¼Œå°±éå¸¸ä¸ä¸€è‡´ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¼šå¿½ç•¥ç©ºä½ã€‚</strong></p>
<ul>
<li><code>forEach()</code>, <code>filter()</code>, <code>reduce()</code>, <code>every()</code> å’Œ <code>some()</code> éƒ½ä¼šè·³è¿‡ç©ºä½ã€‚</li>
<li><code>map()</code> ä¼šè·³è¿‡ç©ºä½ï¼Œä½†ä¼šä¿ç•™è¿™ä¸ªå€¼ã€‚</li>
<li><code>join()</code> å’Œ <code>toString()</code> ä¼šå°†ç©ºä½è§†ä¸º <code>undefined</code>ï¼Œè€Œ <code>undefined</code> å’Œ <code>null</code> ä¼šè¢«å¤„ç†æˆç©ºå­—ç¬¦ä¸²ã€‚</li>
</ul>
<p><strong>ES6 æ˜ç¡®å°†ç©ºä½è½¬ä¸º <code>undefined</code>ã€‚</strong></p>
<ul>
<li><code>entries()</code>ã€<code>keys()</code>ã€<code>values()</code>ã€<code>find()</code>å’Œ <code>findIndex()</code> ä¼šå°†ç©ºä½å¤„ç†æˆ <code>undefined</code>ã€‚</li>
<li><code>for...of</code> å¾ªç¯ä¼šéå†ç©ºä½ã€‚</li>
<li><code>fill()</code> ä¼šå°†ç©ºä½è§†ä¸ºæ­£å¸¸çš„æ•°ç»„ä½ç½®ã€‚</li>
<li><code>copyWithin()</code> ä¼šè¿ç©ºä½ä¸€èµ·æ‹·è´ã€‚</li>
<li>æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ä¹Ÿä¼šå°†ç©ºä½è½¬ä¸º <code>undefined</code>ã€‚</li>
<li><code>Array.from</code> æ–¹æ³•ä¼šå°†æ•°ç»„çš„ç©ºä½ï¼Œè½¬ä¸º <code>undefined</code>ã€‚</li>
</ul>
</div>

    <!-- CONTENT END -->
  </div>
</body>
</html>